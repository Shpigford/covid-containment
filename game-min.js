var name,status="new",fade_delay=500,infected=1,patientsTreated=0,researchLevel=0,researchLevelProgress=0;function researchTreatment(){(researchLevelProgress+=25/(1.5*researchLevel))>=100&&(researchLevel+=1,researchLevelProgress=0,$(".research_level").text(researchLevel)),$(".research .progress-bar").css("width",researchLevelProgress+"%")}function treatInfected(){infected-=1,patientsTreated+=1,$("#infected").text(infected),patientsTreated>=25&&($(".patients_treated").text(patientsTreated),$(".actions").fadeOut("slow",(function(){$(".out_of_hand").delay(fade_delay).fadeIn("slow")})))}function startMain(){$(".main h1").text("Hi there, "+name+"!"),$(".main").fadeIn("slow",(function(){$(".actions").delay(300).fadeIn()}))}function increaseInfected(){infected=Math.ceil(1.01*infected),$("#infected").text(infected)}function save(){var e={status:status,name:name,infected:infected,patientsTreated:patientsTreated,researchLevel:researchLevel,researchLevelProgress:researchLevelProgress};localStorage.setItem("save",JSON.stringify(e))}function load(){var e=JSON.parse(localStorage.getItem("save"));void 0!==e.status&&(status=e.status),void 0!==e.name&&(name=e.name),void 0!==e.infected&&(infected=e.infected),void 0!==e.patientsTreated&&(patientsTreated=e.patientsTreated),void 0!==e.researchLevel&&(researchLevel=e.researchLevel),void 0!==e.researchLevelProgress&&(researchLevelProgress=e.researchLevelProgress),$("#infected").text(infected)}function reset(){localStorage.setItem("save",JSON.stringify({status:"new",name:null,infected:1})),load()}$(document).ready((function(){load(),"new"==status?$(".start h1").fadeIn("slow",(function(){$(".data").delay(fade_delay).fadeIn("slow",(function(){$(".message p:first").delay(fade_delay).fadeIn("slow",(function(){$(".message p:last").delay(fade_delay).fadeIn("slow",(function(){$(".name").delay(fade_delay).fadeIn("slow")}))}))}))})):"start_main"==status&&startMain(),$('input[name="name"]').on("keypress",(function(e){"13"==(e.keyCode?e.keyCode:e.which)&&(name=$(this).val(),$(".start").fadeOut("slow",(function(){start_main(),status="start_main"})))})),$(".treat_infected").on("click",(function(e){e.preventDefault(),treatInfected()})),$(".research_treatment").on("click",(function(e){e.preventDefault(),researchTreatment()}))})),window.setInterval((function(){increaseInfected(),save()}),1e3);