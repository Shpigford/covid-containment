var name,status="new",fade_delay=500,infected=30,uninfected=78e8,patientsTreated=0,researchLevel=0,researchBonus=0,deathRate=2.3,deaths=0,doctors=0;function progressButton(e,t,a){e.prop("disabled",!0),e.find(".progress").animate({width:"100%"},t,"swing",(function(){$(this).parent().prop("disabled",!1),$(this).width("0%"),a()}))}function researchTreatment(){researchLevel+=1,$(".research_level").text(researchLevel),researchBonus=1+researchLevel/10,$(".research_bonus").fadeIn("slow"),$(".research_bonus_amount").text(researchBonus)}function treatInfected(){researchBonus<=0&&(researchBonus=1),infected-=Math.round(1*researchBonus),patientsTreated+=Math.round(1*researchBonus),$(".infected").text(numberWithCommas(infected)),$(".patients_treated").text(numberWithCommas(patientsTreated)),patientsTreated>=20&&"start_main"==status?$(".main").fadeOut("slow",(function(){status="start_more_tools",startMoreTools()})):patientsTreated>=8&&"start_main"==status&&$(".out_of_hand").fadeIn("slow")}function startMain(){$(".main h1").text("Hi there, "+name+"!"),$(".main").fadeIn("slow",(function(){$(".actions").delay(300).fadeIn()}))}function startPrimary(){status="start_primary",$(".primary").fadeIn("slow")}function startMoreTools(){$(".more_tools").fadeIn("slow",(function(){$(".more_tools").delay(3500).fadeOut("slow",(function(){startPrimary()}))}))}function increaseInfected(){var e=infected;infected=Math.ceil(1.03*infected),new_infected=infected-e,uninfected-=new_infected,deaths=Math.ceil(infected*(deathRate/100)),$(".deaths").text(numberWithCommas(deaths)),$(".infected").text(numberWithCommas(infected)),$(".uninfected").text(numberWithCommas(uninfected))}function save(){var e={status:status,name:name,infected:infected,uninfected:uninfected,patientsTreated:patientsTreated,researchLevel:researchLevel,researchBonus:researchBonus,deaths:deaths};localStorage.setItem("save",JSON.stringify(e))}function load(){var e=JSON.parse(localStorage.getItem("save"));null!==e&&(void 0!==e.status&&(status=e.status),void 0!==e.name&&(name=e.name),void 0!==e.infected&&(infected=e.infected),void 0!==e.uninfected&&(uninfected=e.uninfected),void 0!==e.deaths&&(deaths=e.deaths),void 0!==e.patientsTreated&&(patientsTreated=e.patientsTreated),void 0!==e.researchLevel&&(researchLevel=e.researchLevel),void 0!==e.researchBonus&&(researchBonus=e.researchBonus)),$(".infected").text(numberWithCommas(infected)),$(".uninfected").text(numberWithCommas(uninfected)),$(".patients_treated").text(numberWithCommas(patientsTreated)),$(".deaths").text(numberWithCommas(deaths)),$(".research_level").text(researchLevel),researchBonus>1&&$(".research_bonus").show(),$(".research_bonus_amount").text(researchBonus)}function reset(){localStorage.setItem("save",JSON.stringify({status:"new",name:null,infected:20,uninfected:78e8,patientsTreated:0,researchLevel:0,researchLevelProgress:0})),load()}function numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}$(document).ready((function(){load(),"new"==status?$(".start h1").fadeIn("slow",(function(){$(".data").delay(fade_delay).fadeIn("slow",(function(){$(".message p:first").delay(fade_delay).fadeIn("slow",(function(){$(".message p:last").delay(fade_delay).fadeIn("slow",(function(){$(".name").delay(fade_delay).fadeIn("slow")}))}))}))})):"start_main"==status?startMain():"start_primary"==status&&startPrimary(),$('input[name="nameSearch"]').on("keypress",(function(e){"13"==(e.keyCode?e.keyCode:e.which)&&(name=$(this).val(),$(".start").fadeOut("slow",(function(){startMain(),status="start_main"})))})),$(".treat_infected").on("click",(function(e){e.preventDefault(),progressButton($(this),1e3,treatInfected)})),$(".research_treatment").on("click",(function(e){e.preventDefault(),progressButton($(this),3500,researchTreatment)}))})),window.setInterval((function(){increaseInfected(),save()}),1e3);